# 연속적인 사용자 행동 흐름 (User Flows)

이 프로젝트의 핵심은 **"Save → AutoRoute → Plan 저장 → Visited → 3줄 리뷰 → 컬렉션 공유"**라는 루프가 끊기지 않도록 하는 것입니다.

## End-to-End 핵심 루프 (Core Loop)

1. **지도 탐색 (Map & Filter)**
   - **경로**: `/` (Main Map View)
   - **행동**: MapLibre 지도를 통해 전 세계 (혹은 특정 지역)의 현대 미술관 핀을 봅니다.
   - **결과**: 흥미로운 마커를 클릭하여 슬라이드 패널(또는 모달)로 상세 정보를 띄웁니다.

2. **미술관 상세 확인 및 저장 (Detail & Save)**
   - **경로**: `/` (Panel 오픈 중) -> API `POST /api/collections/save`
   - **행동**: 사이드 패널에서 미술관 정보를 보고 "저장하기"를 누릅니다.
   - **결과**: 기본 "내 저장소" 혹은 사용자가 생성한 특정 "폴더(비공개)"에 해당 미술관이 `SavedMuseum` 모델로 담깁니다.

3. **동선 생성 (AutoRoute)**
   - **경로**: `/(사이드바 내 Plan Tab)` -> 혹은 `/plans/new`
   - **행동**: 내가 저장한 미술관 목록(폴더) 열람. "자동 동선(AutoRoute) 생성" 버튼 클릭.
   - **결과**: 선택한 미술관들의 위치값(Point)을 기반으로 가까운 순서로 동선이 짜이고, 이를 `Plan` 모델로 저장.

4. **방문 완료 및 리뷰 작성 (Visited & 3-Line Review)**
   - **경로**: `/museums/[id]` 혹은 내 Plan 페이지 -> API `POST /api/reviews`
   - **행동**: 실제 미술관 방문 후, 해당 미술관 화면에서 "방문 체크(Visited)" 토글 후 3줄 리뷰 + 사진 추가.
   - **결과**: `Review` 및 `Visited` 상태가 DB에 업데이트되며 잔디밭/배지 등의 보상 로직 발동(Monthly Challenge 연계 가능).

5. **컬렉션 공유 및 재유입 (Share Collection)**
   - **경로**: `/collections/[id]`
   - **행동**: 내가 짠 Plan과 방문 완료한 리뷰들을 모아 "유럽 현대미술 3박 4일" 형태의 Collection으로 구성한 뒤 "Public"으로 전환. URL 복사 혹은 SNS 공유.
   - **결과**: 공유된 링크를 받은 다른 유저는 해당 컬렉션 뷰를 보고 자극을 받아 1번의 탐색(내 지도로 가져오기)으로 진입.

## 상태 머신 관점의 흐름 유지 전략
각 화면 간 이동 시, 서버 렌더링(Server Side)이 발생하더라도 사용자가 이전에 열어둔 플랜 목록이나 지도의 줌 레벨을 잃지 않도록 URL 쿼리 파라미터(`?lat=&lng=&zoom=`)나 전역 UI 상태를 패스합니다.
